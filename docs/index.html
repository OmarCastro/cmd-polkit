<!doctype html>
<html lang="en">
    <head>
        <title>It's a QR Code</title>
        <meta name="description" content="documentation of 'cmd-polkit' application">
        <meta name="keywords" content="polkit policy-kit security">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="doc.css" ss:inline>
    </head>
    <body>
        <div class="sidebar">

        <div class="toc">
            <div class="toc">
                <p><strong>Documentation</strong></p>
                <template ss:toc></template>
                <!-- p><strong><a href="contributing">How to contribute</a></strong></p -->        
            </div>
        </div>
    </div>
    <div class="content">

        <h1 class="no-toc">
            cmd-polkit
        </h1>

        <section class="section section--badge">
            <a href="https://github.com/OmarCastro/cmd-polkit" aria-label="go to Github repository" title="go to Github repository">
                <svg ss:include="reports/license-badge-a11y.svg" ></svg>
            </a>
            <a href="reports/testlog.txt" aria-label="Show test results">
                <svg ss:include="reports/test-results-badge-a11y.svg" ></svg>
            </a>
            <a href="reports/coveragereport" aria-label="Show test code coverage information">
                <svg ss:include="reports/coverage-badge-a11y.svg"></svg>
            </a>
        </section>

        <section class="section section--introduction" ss:markdown>
            ## Introducion

            `cmd-polkit` is a tool that allows to easily customize the UI used to authenticate on polkit
        </section>

        <section class="section section--introduction" ss:markdown>
            ## How it works

            It works by calling the defined command and communicate via stdin and stdout, the command receives the message from stdin and sends it by writing to stdout,
            each line represents a message, the format used for communication is JSON.

            The next figure show a sequence diagram of an authentication process

            <figure style="text-align: center;">
                <img width="600" src="./seq-diagram-1.svg"></img>
                <figcaption>Fig.1 - authentication process</figcaption>
            </figure>

        </section>

        <section class="section section--messages" ss:markdown>

            ## Message schemas

            ### authentication message request

            When polkit request authentication, cmd-polkit will send a message 
            to command stdin. It respects the following schema 

            ```
            {
                "action": "request password",
                "prompt": string 
                "message": string 
            }
            ```

            ### authentication message response

            After the _authentication message request_ is sent, it will expect
            a response from command stdout that respects the folloing schema,
            it will use the password to authenticate to polkit

            ```
            {
                "action": "authenticate",
                "password": string 
            }
            ```

            
        </section>



    </div>
        
    </body>
</html>
